/* --- CONFIGURATION GÉNÉRALE --- */
body {
    background-color: #121212;
    color: white;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    margin: 0;
    overflow: hidden;
}

.app-container {
    height: 100vh;
    width: 100vw;
    display: grid;
    grid-template-areas: "main";
}

.view {
    grid-area: main;
    display: none;
}

.view.active {
    display: grid;
}

/* --- ÉCRAN DE CONNEXION --- */
#login-view {
    justify-content: center;
    align-items: center;
    text-align: center;
    z-index: 1002; /* Doit être au-dessus de tout */
    background-color: #121212;
    position: absolute; /* Ajouté pour la superposition */
    width: 100%;
    height: 100%;
}
#login-view.active { display: flex !important; }
#login-view:not(.active) { display: none !important; } /* S'assure qu'il disparaît */


#login-button {
    background-color: #1DB954;
    color: white;
    border: none;
    padding: 15px 30px;
    border-radius: 50px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    margin-top: 20px;
}
#login-button:hover { background-color: #1ED760; }

/* --- STRUCTURE DE L'APPLICATION --- */
#app-view {
    grid-template-rows: 60px 1fr 90px;
    grid-template-areas: 
        "header"
        "main"
        "footer";
    height: 100vh;
}
#app-header {
    grid-area: header;
    background-color: #181818;
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    align-items: center;
    padding: 0 20px;
}
#header-left { display: flex; justify-content: flex-start; gap: 10px; }
#header-center { text-align: center; }
#header-right { }

.menubtn {
    background-color: #282828;
    color: white;
    padding: 8px 12px;
    border: none;
    cursor: pointer;
    border-radius: 4px;
}
.menubtn:hover { background-color: #404040; }
.dropdown { position: relative; display: inline-block; }
.dropdown-content {
    display: none;
    position: absolute;
    background-color: #282828;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1001;
    border-radius: 4px;
    padding: 5px 0;
}
.dropdown-content a {
    color: white;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
    font-size: 14px;
}
.dropdown-content a:hover { background-color: #404040; }
.dropdown-content hr { border: 1px solid #404040; margin: 5px 0; }
.show { display: block; }

#app-main {
    grid-area: main;
    display: grid;
    grid-template-columns: 1fr 1fr;
    overflow: hidden;
    border-top: 1px solid #282828;
    border-bottom: 1px solid #282828;
}

#app-footer {
    grid-area: footer;
    background-color: #181818;
    display: grid;
    grid-template-columns: 1fr 1.5fr 1fr;
    align-items: center;
    padding: 0 15px;
    visibility: hidden;
}

/* --- PANNEAUX CENTRAUX --- */
#left-pane, #right-pane { overflow-y: auto; }
#right-pane { border-left: 1px solid #282828; }
#playlists-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 20px;
    padding: 20px;
}
.playlist-item {
    background-color: #282828;
    border-radius: 8px;
    padding: 15px;
    transition: background-color 0.2s;
    position: relative;
}
.playlist-item:hover { background-color: #404040; }
.playlist-item img {
    width: 100%;
    border-radius: 4px;
    aspect-ratio: 1 / 1;
    object-fit: cover;
    cursor: pointer;
}
.playlist-item p {
    margin-top: 10px;
    font-weight: bold;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    cursor: pointer;
}
.playlist-item p.active { color: #1DB954; }
.play-button {
    position: absolute;
    bottom: 75px;
    right: 20px;
    background-color: #1DB954;
    color: black;
    border: none;
    border-radius: 50%;
    width: 45px;
    height: 45px;
    font-size: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.2s, transform 0.2s;
    transform: translateY(10px);
}
.playlist-item:hover .play-button { opacity: 1; transform: translateY(0); }
#tracks-container { padding: 20px; }
.placeholder-text { color: #b3b3b3; text-align: center; margin-top: 50px; }
.playlist-header { display: flex; align-items: center; gap: 20px; margin-bottom: 30px; }
.playlist-header img { width: 150px; height: 150px; object-fit: cover; }
.playlist-header h2 { margin: 0; }
.playlist-header h2.active { color: #1DB954; }
.track-item { display: flex; align-items: center; gap: 15px; padding: 10px; border-radius: 4px; cursor: pointer; }
.track-item:hover { background-color: #282828; }
.track-item img { width: 40px; height: 40px; object-fit: cover; }
.track-info { overflow: hidden; }
.track-info h3 { margin: 0; font-size: 16px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.track-info p { margin: 0; font-size: 14px; color: #b3b3b3; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.track-info h3.active { color: #1DB954; }

/* --- FOOTER / LECTEUR --- */
#now-playing { display: flex; align-items: center; overflow: hidden; }
#now-playing img { width: 56px; height: 56px; margin-right: 12px; }
#now-playing-info { display: flex; flex-direction: column; overflow: hidden; }
#now-playing-title { font-weight: bold; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
#now-playing-artist { font-size: 12px; color: #b3b3b3; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
#player-controls { display: flex; flex-direction: column; align-items: center; }
#player-buttons { display: flex; align-items: center; gap: 16px; }
#player-buttons button { background: none; border: none; color: #b3b3b3; font-size: 20px; cursor: pointer; }
#player-buttons button:hover { color: white; }
#play-pause-btn { font-size: 32px; color: white; }
#progress-bar-container { display: flex; align-items: center; gap: 8px; width: 100%; max-width: 400px; margin-top: 5px; }
.time-label { font-size: 12px; color: #b3b3b3; }
input[type="range"] { -webkit-appearance: none; appearance: none; background: transparent; cursor: pointer; width: 100%; }
input[type="range"]::-webkit-slider-runnable-track { height: 4px; background: #4d4d4d; border-radius: 2px; }
input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; margin-top: -4px; background-color: white; height: 12px; width: 12px; border-radius: 50%; }
#right-controls { display: flex; justify-content: flex-end; align-items: center; gap: 10px; }
#devices-button { background: none; border: none; color: white; cursor: pointer; font-size: 20px; }
#volume-slider { width: 100px; }
.context-menu { position: absolute; background-color: #282828; border-radius: 4px; padding: 5px; z-index: 1001; box-shadow: 0 4px 8px rgba(0,0,0,0.3); }
.context-menu-item { padding: 10px 15px; cursor: pointer; color: white; white-space: nowrap; }
.context-menu-item:hover { background-color: #404040; }